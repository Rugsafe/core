name: Willchain Protocol

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master]

jobs:

  deploy:
    runs-on: self-hosted
    steps:
    - uses: actions/checkout@v2

    - name: Build Protocol
      run: make build

    - name: Kill Tmux Session
      run: tmux kill-session -t will-chain-protocol || true

    - name: Run Explorer
      run: tmux new -d -s will-chain-protocol 'sh -c "make run"';